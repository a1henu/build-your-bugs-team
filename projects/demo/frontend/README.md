# TOEFL 写作评分与润色系统 - 前端

基于 Vite + Vue 3 + TypeScript 构建的前端界面。

## 启动前端

```bash
npm install
npm run dev

```

## 功能特性

- 📝 输入学生作文内容
- 📊 **结构化分点评分**：自动评分并生成详细的结构化评语
  - ✅ **优点**：列出作文的强项（0-4 个要点）
  - ❌ **缺点**：指出需要改进的地方（0-4 个要点）
  - 🔄 **待提升**：提供改进建议（0-4 个要点）
  - 📝 **总评**：综合评估和总结
  - 🎯 **分数**：0-5 分的 TOEFL 标准评分
- ✨ 自动润色作文，提升到 5 分标准
- 🔄 实时后端健康状态检查
- 🎨 现代化、响应式 UI 设计
- 📡 流式传输：实时显示评分和润色过程

## 开发环境要求

- Node.js 20.19.0+ 或 22.12.0+
- npm 或 yarn

## 安装依赖

```bash
cd frontend
npm install
```

## 开发运行

```bash
npm run dev
```

前端服务将在 `http://localhost:5173` 启动（Vite 默认端口）。

**注意**：确保后端服务（Flask）在 `http://localhost:8000` 运行。

## 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist/` 目录。

## 预览生产构建

```bash
npm run preview
```

## 项目结构

```text
frontend/
├── src/
│   ├── api/
│   │   └── service.ts      # API 服务封装
│   ├── components/         # Vue 组件
│   ├── App.vue            # 主应用组件
│   ├── main.ts            # 应用入口
│   └── style.css          # 全局样式
├── public/                # 静态资源
├── index.html            # HTML 模板
├── vite.config.ts        # Vite 配置（包含代理设置）
└── package.json          # 项目依赖
```

## API 代理配置

在 `vite.config.ts` 中配置了代理，将 `/api/*` 请求转发到后端：

```typescript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8000',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, '')
    }
  }
}
```

这意味着前端调用 `/api/grade_and_polish` 会被转发到后端的 `http://localhost:8000/grade_and_polish`。

## 使用说明

1. **启动后端服务**（在项目根目录）：

   ```bash
   python app.py
   ```

2. **启动前端服务**（在 frontend 目录）：

   ```bash
   npm run dev
   ```

3. **打开浏览器**访问 `http://localhost:5173`

4. **使用界面**：
   - 输入或选择题目文件（默认：test.yaml）
   - 在文本框中输入学生作文
   - 点击"提交"按钮
   - 查看**结构化评分结果**（实时显示）：
     - 优点、缺点、待提升建议（列表形式）
     - 总评（综合评估）
     - 分数（0-5 分）
   - 查看润色后的作文（与原文对比显示）

## 分点评分说明

### 评分结构

系统采用结构化的评分方式，将评语分为以下几个部分：

#### 1. 优点 (Strengths)

- 列出作文的强项和亮点
- 每个优点独立成点，清晰明了
- 数量：0-4 个（根据实际情况，不强求）

#### 2. 缺点 (Weaknesses)

- 指出作文中存在的问题和不足
- 帮助识别需要改进的方面
- 数量：0-4 个（根据实际情况）

#### 3. 待提升 (Opportunities)

- 提供具体的改进建议
- 指导如何提升作文质量
- 数量：0-4 个（根据实际情况）

#### 4. 总评 (Overview)

- 综合评估作文的整体质量
- 解释评分理由
- 总结主要观点

#### 5. 分数 (Score)

- TOEFL iBT 标准评分：0-5 分
- 基于官方评分标准
- 实时显示在评分结果头部

### 评分标准

- **5 分**：完全成功，语言流畅，几乎无错误
- **4 分**：基本成功，语言清晰，少量错误
- **3 分**：部分成功，基本可理解，有明显错误
- **2 分**：基本不成功，语言限制影响理解
- **1 分**：不成功，严重语言问题
- **0 分**：无回答或完全无关

### 实时更新

- 评分过程中，分点会**实时流式显示**
- 页面会自动滚动，确保看到最新内容
- 所有分点会逐步出现，提供良好的用户体验

### 界面布局

评分结果页面布局（从上到下）：

1. **评分结果区域**（顶部）
   - 显示分数和结构化分点
   - 优点、缺点、待提升、总评

2. **原文和润色对比**（中部）
   - 左右并排显示原文和润色后的版本
   - 方便对比查看改进

3. **操作按钮**（底部）
   - 重新开始按钮

## 故障排除

### 后端连接失败

- 确保后端服务在 `http://localhost:8000` 运行
- 检查后端健康状态指示器（页面顶部）
- 查看浏览器控制台的错误信息

### 端口冲突

如果 5173 端口被占用，Vite 会自动使用下一个可用端口。或者可以在 `vite.config.ts` 中指定端口：

```typescript
server: {
  port: 3000,  // 自定义端口
  // ...
}
```
